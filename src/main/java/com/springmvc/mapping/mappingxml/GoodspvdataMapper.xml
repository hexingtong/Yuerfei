<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springmvc.mapping.GoodspvdataMapper">
  <resultMap id="BaseResultMap" type="com.springmvc.pojo.Goodspvdata">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Mar 22 15:11:15 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="goodId" jdbcType="INTEGER" property="goodid" />
    <result column="pone" jdbcType="INTEGER" property="pone" />
    <result column="ptwo" jdbcType="INTEGER" property="ptwo" />
    <result column="pthree" jdbcType="INTEGER" property="pthree" />
    <result column="pfour" jdbcType="INTEGER" property="pfour" />
    <result column="pfive" jdbcType="INTEGER" property="pfive" />
    <result column="psat" jdbcType="INTEGER" property="psat" />
    <result column="psunday" jdbcType="INTEGER" property="psunday" />
  </resultMap>

  <!--有则更新，无能插入pv，唯一索引goodid-->
  <insert id="INPV" parameterType="java.util.List">
    insert into goodspvdata
    (
    goodId,
    pone,
    ptwo,
    pthree,
    pfour,
    pfive,
    psat,
    psunday
    )
    values
    <foreach collection="list" item="item" index= "index" separator =",">
      (
      #{item.goodid},
      #{item.pone},
      #{item.ptwo},
      #{item.pthree},
      #{item.pfour},
      #{item.pfive},
      #{item.psat},
      #{item.psunday}
      )

    </foreach>
    ON DUPLICATE KEY UPDATE
    pone = values(pone),ptwo=values(ptwo),pthree = values(pthree),pfour=values(pfour),pfive = values(pfive),psat=values(psat),psunday=values(psunday)

  </insert>

  <update id="upPv" parameterType="Integer">
UPDATE goodspvdata SET pone=0,ptwo=0,pthree=0,pfour=0,pfive=0,psat=0,psunday=0 WHERE 1=1


  </update>

  <!-- Description： 查询所有的产品pv通过传入id
 * @author boyang
 * @date 2019/3/28 17:22
 * @param
 * @return com.springmvc.pojo.Goodspvdata-->
  <select id="getGoodspvdata" resultType="com.springmvc.pojo.Goodspvdata" parameterType="Integer">

SELECT g.* FROM `goodspvdata` g WHERE goodsId=#{goodsId}
  </select>


</mapper>