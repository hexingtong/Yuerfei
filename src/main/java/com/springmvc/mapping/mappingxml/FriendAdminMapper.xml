<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springmvc.mapping.FriendAdminMapper">
  <resultMap id="BaseResultMap" type="com.springmvc.pojo.FriendAdmin">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 07 16:53:06 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="friendId" jdbcType="INTEGER" property="friendid" />
    <result column="account" jdbcType="VARCHAR" property="account" />
    <result column="pwd" jdbcType="VARCHAR" property="pwd" />
    <result column="shortUrl" jdbcType="VARCHAR" property="shorturl" />
    <result column="intradayQuantity" jdbcType="INTEGER" property="intradayquantity" />
    <result column="defaultQuantity" jdbcType="INTEGER" property="defaultquantity" />
    <result column="addTime" jdbcType="TIMESTAMP" property="addtime" />
  </resultMap>


  <!--自定义更新账号密码扣量-->
    <update id="updateFriend">
      UPDATE friend_admin
      <trim prefix="set" suffixOverrides=",">
        <if test="account != null and account!='' ">
          account=#{account},
        </if>
        <if test="pwd!=null and pwd!='' ">
          pwd=#{pwd},
        </if>
        <if test="intradayQuantity!=null ">
          intradayQuantity=#{intradayQuantity},
        </if>
        <if test="defaultQuantity!=null ">
          defaultQuantity=#{defaultQuantity},
        </if>
      </trim>
      WHERE friendId=#{id}
    </update>

    <!--获取用户登录信息-->
    <select id="getPwd" resultType="com.springmvc.pojo.FriendAdmin">
      SELECT f.* FROM friend_admin f WHERE  account=#{username}
    </select>

  <!--通过shortUrl过去扣量百分比-->
  <select id="getQuantity" resultType="com.springmvc.pojo.FriendAdmin">
      SELECT f.* FROM friend_admin f WHERE  shortUrl=#{shortUrl}
  </select>




</mapper>