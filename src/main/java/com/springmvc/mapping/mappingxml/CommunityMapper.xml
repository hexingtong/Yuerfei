<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springmvc.mapping.CommunityMapper">
  <resultMap id="BaseResultMap" type="com.springmvc.pojo.ArticeSupper">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 25 14:07:08 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="articleId" jdbcType="INTEGER" property="articleid" />
    <result column="adminId" jdbcType="INTEGER" property="adminid" />
    <result column="comment" jdbcType="VARCHAR" property="comment" />
    <result column="addTime" jdbcType="TIMESTAMP" property="addtime" />
    <result column="checkStatus" jdbcType="INTEGER" property="checkstatus" />
  </resultMap>

  <!--社区展示-->
  <select id="selectCommunity" parameterType="com.springmvc.pojo.ArticeSupper" resultType="com.springmvc.pojo.ArticeSupper">
    SELECT a.id,a.content,a.addTime,a.title ,a.adminId,a.readingCount,a.replies,a.click,a.checkStatus,a.statusReason,a.stickStatus,k.img,
    k.title AS name,k.phone FROM `article`AS a,kn_admin AS k
     <where>
       <if test="adminid!=null and adminid!='' ">
        AND a.adminId=k.id
       </if>
       <if test="checkstatus!=null and checkstatus!='' ">
        AND a.checkstatus=1
       </if>
     </where>
    order  by a.stickStatus=3 DESC,a.addTime DESC
  </select>

   <!--查询自己的全部帖子-->
    <select id="selectMyCommunity" parameterType="com.springmvc.pojo.ArticeSupper" resultType="com.springmvc.pojo.ArticeSupper">
    SELECT * FROM article WHERE adminId=#{adminid}  order  by addTime DESC
    </select>
</mapper>